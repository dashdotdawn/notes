(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{189:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),n("p",[t._v("利用 webpack 编译过程中触发的各个事件(hook)，对 compiler 和 compilation 进行处理；也可以自定义事件")]),t._v(" "),t._m(8),t._m(9),t._v(" "),n("p",[t._v("得到 mode 为 none 下的输出文件，适当简化后如下")]),t._v(" "),t._m(10),t._m(11),t._v(" "),n("p",[t._v("当使用 NamedModulesPlugin 或 HashedModuleIdsPlugin 时，参数是一个 modules 对象，键值为模块的 path 或 hash 值")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._v(" "),n("ol",[n("li",[t._v("提取 css 文件\n"),n("ul",[n("li",[t._v("webpack4: mini-css-extract-plugin, 目前有个 "),n("code",[t._v("bug")]),t._v("，options 中设置的 publickPath 无效，见"),n("a",{attrs:{href:"https://github.com/webpack-contrib/mini-css-extract-plugin/issues/222",target:"_blank",rel:"noopener noreferrer"}},[t._v("issue"),n("OutboundLink")],1)]),t._v(" "),n("li",[t._v("webpack3: extract-text-webpack-plugin")])])]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),n("li",[t._v("es6 转码: babel-loader 做两件事\n"),n("ul",[n("li",[t._v("处理语法 如 class: babel-loader 依赖 babel-core 需配套使用，用来处理语法")]),t._v(" "),n("li",[t._v("处理 api 如 fetch: babel-plugin-transform-run-time 依赖 babel-rumtime 需配套使用，helper 函数不重复注入，通过 require 引用，减少代码冗余。详见 "),n("router-link",{attrs:{to:"./babel.html"}},[t._v("babel")])],1)])]),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20)]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),n("p",[t._v("一些概念")]),t._v(" "),t._m(24),t._v(" "),n("p",[n("a",{attrs:{href:"https://webpack.js.org/configuration/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webpack.js.org/configuration/"),n("OutboundLink")],1)]),t._v(" "),n("p",[t._v("webpack.config.js")]),t._v(" "),t._m(25),t._m(26),t._v(" "),n("p",[t._v("提高构建速度")]),t._v(" "),t._m(27),t._v(" "),n("p",[t._v("减小输出文件")]),t._v(" "),t._m(28),t._v(" "),n("p",[t._v("首屏优化")]),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),n("p",[t._v("补充：production 应该还启用了 FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, OccurrenceOrderPlugin 和 SideEffectsFlagPlugin，见 "),n("a",{attrs:{href:"https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("github.com/webpack"),n("OutboundLink")],1)]),t._v(" "),t._m(33),t._v(" "),t._m(34),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),n("p",[n("a",{attrs:{href:"https://webpack.js.org/configuration/devtool/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webpack.js.org/configuration/devtool/"),n("OutboundLink")],1),t._v("\n速度和输出文件的区别")]),t._v(" "),t._m(38),t._v(" "),n("p",[t._v("如果作为工具库，需要提供 esm 版本的代码，依然需要 rollup 的，并且二者的 tree shaking 分析存在差异。")]),t._v(" "),t._m(39),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://webpack.js.org/guides/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack guide"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"http://webpack.wuhaolin.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入浅出 Webpack"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/38456425",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 4 配置最佳实践"),n("OutboundLink")],1)])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"webpack-tl-dr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-tl-dr","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack TL;DR")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("超长预警，不懂 webpack 时一点点扒文档并测试的总结")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理","aria-hidden":"true"}},[this._v("#")]),this._v(" 原理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"webpack-处理步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-处理步骤","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack 处理步骤")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("初始化")]),this._v(" "),s("li",[this._v("编译")]),this._v(" "),s("li",[this._v("输出")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"loader-原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loader-原理","aria-hidden":"true"}},[this._v("#")]),this._v(" loader 原理")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" meta"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 返回单项结果")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("someSyncOperation")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// 返回多项结果")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("callback")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("someSyncOperation")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" meta"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 使用 callback 时总是返回 undefined")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("callback")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  err"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Error "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("null")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  content"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" string "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" Buffer"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  sourceMap"),n("span",{attrs:{class:"token operator"}},[t._v("?")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SourceMap"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  meta"),n("span",{attrs:{class:"token operator"}},[t._v("?")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any "),n("span",{attrs:{class:"token comment"}},[t._v("// meta 可以用来传递 AST，便于在 loaders 之间相互传递加速 build")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"plugin-原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-原理","aria-hidden":"true"}},[this._v("#")]),this._v(" plugin 原理")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// 根据不同的 hook 类型，可能使用 tapAsync 或 tapPromise")]),t._v("\ncompiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someHook"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("tap")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token comment"}},[t._v("/* ... */")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// 如：compile 事件发生，执行函数")]),t._v("\ncompiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hooks"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compile"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("tap")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'MyPlugin'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'Synchronously tapping the compile hook.'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"输出文件分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出文件分析","aria-hidden":"true"}},[this._v("#")]),this._v(" 输出文件分析")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modules"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 已缓存模块")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" installedModules "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 加载模块的方法")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("__webpack_require__")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleId"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token comment"}},[t._v("// 判断模块是否在缓存中")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("installedModules"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("      "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" installedModules"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token comment"}},[t._v("// 创建新模块，并放入缓存")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" module "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" installedModules"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("      i"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" moduleId"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("      l"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("      exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token comment"}},[t._v("// 执行新模块的方法")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    modules"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("moduleId"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("call")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token comment"}},[t._v("// 将模块标记为已加载")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("l "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token comment"}},[t._v("// 返回模块输出")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 在 __webpack_require__ 上定义了一堆变量和方法，用来引用模块、缓存、判断是否 esm 等")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 加载 entry 模块并返回结果")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v("  "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("__webpack_require__")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__webpack_require__"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("s "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/************************************************************************/")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/* 0 */")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("code\n\ndevtool"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'eval'")]),t._v(" 时 "),n("span",{attrs:{class:"token function"}},[t._v("eval")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("code "),n("span",{attrs:{class:"token comment"}},[t._v("//# sourceURL=webpack:...)")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("/******/")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("即一个IIFE，其中定义了 "),s("strong",[this._v("webpack_require")]),this._v(" 对象，执行载入 entry 模块，参数为所有 modules 的数组")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modules"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("modules"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"基本配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 基本配置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("压缩 css\n"),s("ul",[s("li",[this._v("webpack4:  css-loader 不再支持 cssnano，可以使用 optimize-css-assets-webpack-plugin , 或在 postcss 中加入 cssnano 的 plugin")]),this._v(" "),s("li",[this._v("webpack3: cssnano 是 css-loader 内置的，开启 minimize 选项即可")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("css 自动加前缀: postcss-loader autoprefixer plugin\n"),s("ul",[s("li",[this._v("postcss 配置文件：postcss.config.js / .postcssrc.json")]),this._v(" "),s("li",[this._v("配置文件位置：css所在目录 到 根目录之间的路径 / package.json 中加个 postcss 项")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("压缩 JS\n"),s("ul",[s("li",[this._v("uglifyjs-webpacl-plugin 建议开启 parallel 选项，多进程并行 build")]),this._v(" "),s("li",[this._v("mode: production 时自动启用 uglifyjs")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("tree shaking\n"),s("ul",[s("li",[this._v("使用 es6 的 import / export 语法，因为模块的依赖关系与运行时无关，因此可以静态分析出 dead code")]),this._v(" "),s("li",[this._v("package.json 中设置 sideEffects")]),this._v(" "),s("li",[this._v("开启 production mode（ModuleConcatenationPlugin 和 UglifyJsPlugin 起作用）")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("li",[t._v("提取公共代码 Code Splitting\n"),n("ul",[n("li",[t._v("webpack4: SplitChunksPlugin")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("optimization"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  splitChunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    chunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'all'")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("webpack3: CommonsChunkPlugin")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("CommonsChunkPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  chunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v("'x'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'y'")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'base'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  minChunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Number "),n("span",{attrs:{class:"token comment"}},[t._v("// 被提取文件出现的最少次数")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[this._v("其他\n"),s("ul",[s("li",[this._v("html-webpack-plugin 生成 html，inject files")]),this._v(" "),s("li",[this._v("clean-webpack-plugin build 前清空指定目录")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"高级配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高级配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 高级配置")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("coding splitting 的几种方式\n"),n("ul",[n("li",[t._v("默认：动态载入的 chunk import(/* webpackChunkName: \"lodash\" */ 'lodash').then; 支持 prefetch 和 preload，import(/* webpackPrefetch: true */ 'LoginModal');")]),t._v(" "),n("li",[t._v("默认：动态载入的 chunk 中引入的"),n("code",[t._v("新的")]),t._v("共用 chunk 或"),n("code",[t._v("新的")]),t._v("第三方 modules (node_modules 中)，要求大于 30kb，符合并行请求数量")]),t._v(" "),n("li",[t._v("自定义：按需对 splitchunks 进行配置，一般可以考虑将 all chunks 中的第三方模块合并为一个 vendor，长期缓存")])])]),t._v(" "),n("li",[t._v("缓存策略\n"),n("ul",[n("li",[t._v("不缓存 html")]),t._v(" "),n("li",[t._v("缓存 基础库js、分割的公共js、业务代码js、静态文件")]),t._v(" "),n("li",[t._v("利用文件名中的 hash 值来控制缓存命中，使用 contenthash、 NamedModulesPlugin（development 下适用，运行慢）或 HashedModuleIdsPlugin（production 适用）生成文件名，确保业务代码不影响基础库的 hash 值")]),t._v(" "),n("li",[t._v("分别配置 js、css、css 中导入资源的 publicPath，以免单个域名下请求阻塞"),n("code",[t._v("[incomplete]")])])])]),t._v(" "),n("li",[t._v("tree shaking: ModuleConcatenationPlugin 中的 scope hoisting, 将所有模块放到同一个闭包中执行 "),n("code",[t._v("[incomplete]")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"配置参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置参数","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置参数")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ol",[n("li",[t._v("chunk: 从 entry 出发找到全部依赖 module 的代码块")]),t._v(" "),n("li",[t._v("entry 的类型\n"),n("ol",[n("li",[t._v("string  生成一个 chunk: main")]),t._v(" "),n("li",[t._v("array（只导出最后一个）生成一个 chunk: main")]),t._v(" "),n("li",[t._v("object 生成多个 chunk: 键名")]),t._v(" "),n("li",[t._v("以上三种组合")]),t._v(" "),n("li",[t._v("function 动态 entry")])])]),t._v(" "),n("li",[t._v("module.exports 是数组时，每份配置都会执行一次 [看到有文章提过，文档中没有找到，还没有测过]")]),t._v(" "),n("li",[t._v("命令行参数优先级高于配置文件")]),t._v(" "),n("li",[t._v("HMR 原理：子模块发生更新，事件向上传递，直到某一层接收，否则刷新网页，依赖于每个 chunk 中包含的代理客户端代码")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'path'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"production"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// "production" | "development" | "none"')]),t._v("\n  entry"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"./app/entry"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// string | object | array  // defaults to ./src")]),t._v("\n  output"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"dist"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// string, absolute path")]),t._v("\n    filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"bundle.js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// string    // entry 中 chunks 的文件名样板")]),t._v("\n    chunkFilename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'[name].bundle.js'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 非 entry 中 chunks 的文件名样板")]),t._v("\n    publicPath"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"/assets/"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// string    // the url to the output directory resolved relative to the HTML page")]),t._v("\n    library"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"MyLibrary"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// string, 导出库名称")]),t._v("\n    libraryTarget"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"umd"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 导出库类型 amd | umd | umd2 | commonjs | commonjs2 | window | global | var...")]),t._v("\n  module"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.jsx?$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 匹配文件名")]),t._v("\n        include"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"app"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 匹配路径")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exclude"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"app/demo-files"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// exclude 优先级最高，")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// exclude / include 使用绝对路径的数组，尽量使用 include 而非 exclude 匹配")]),t._v("\n\n        enforce"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"pre"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// pre | inline | normal | post 处理顺序")]),t._v("\n        loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"babel-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.html$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),n("span",{attrs:{class:"token comment"}},[t._v("// 多个 loader")]),t._v("\n          "),n("span",{attrs:{class:"token string"}},[t._v('"htmllint-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"html-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            options"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),n("span",{attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    noParse"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("special"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("library\\"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js$"),n("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 不对未使用模块化的文件进行递归解析处理，如 jquery")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  resolve"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 模块化语法解析规则，就是优先从哪儿开始找模块")]),t._v("\n    modules"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{attrs:{class:"token string"}},[t._v('"node_modules"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("resolve")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"app"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 文件路径")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    extensions"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('".js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('".json"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('".jsx"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('".css"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 文件后缀")]),t._v("\n    alias"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 起个别名")]),t._v("\n      "),n("span",{attrs:{class:"token string"}},[t._v('"module"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"new-module"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v('// 例如 "module" -> "new-module", "module/path/file" -> "new-module/path/file"')]),t._v("\n      "),n("span",{attrs:{class:"token string"}},[t._v('"only-module$"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"new-module"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 使用 $ 只命中关键字结尾的导入语句")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    mainFields"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v("'browser'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'module'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'main'")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 根据 package.json 中的配置类型读取模块，默认配置")]),t._v("\n    enforceExtension"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 要求 import 语句必须带后缀")]),t._v("\n    enforceModuleExtension"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 兼容第三方模块")]),t._v("\n  performance"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    hints"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"warning"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// enum    maxAssetSize: 200000, // int (in bytes),")]),t._v("\n    maxEntrypointSize"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("400000")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// int (in bytes)")]),t._v("\n    assetFilter"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("function")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assetFilename"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// Function predicate that provides asset filenames")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" assetFilename"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("endsWith")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'.css'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" assetFilename"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("endsWith")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'.js'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devtool"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"source-map"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// enum  // enhance debugging by adding meta info for the browser devtools")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// source-map most detailed at the expense of build speed.")]),t._v("\n  context"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// string 绝对路径，配置项目根目录，即寻找 entry 与 module.rules.loader 中相对路径的基准")]),t._v("\n  target"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"web"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// enum  // 运行环境")]),t._v("\n  externals"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"react"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/^@angular\\//")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// 使用运行环境提供的全局变量，不需要打包")]),t._v("\n  serve"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("//object")]),t._v("\n    port"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1337")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    content"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'./dist'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// lets you provide options for webpack-serve")]),t._v("\n  stats"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"errors-only"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("// lets you precisely control what bundle information gets displayed")]),t._v("\n  devServer"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 通过 DevServer 启动时有效")]),t._v("\n    proxy"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// proxy URLs to backend development server")]),t._v("\n      "),n("span",{attrs:{class:"token string"}},[t._v("'/api'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    contentBase"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("join")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'public'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// boolean | string | array, static file location")]),t._v("\n    compress"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// enable gzip compression")]),t._v("\n    historyApiFallback"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// true for index.html upon 404, object for multiple paths")]),t._v("\n    hot"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 开启 HMR")]),t._v("\n    https"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// true for self-signed, object for cert authority")]),t._v("\n    noInfo"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// only errors & warns on hot reload")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  watch"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// boolean 启用监听")]),t._v("\n  watchOptions"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    aggregateTimeout"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1000")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 毫秒，监听到变化后延迟指定时间再 rebuild")]),t._v("\n    poll"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    poll"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("500")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 毫秒，每隔多久查询一次")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"优化总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 优化总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("减少文件处理 include / exclude / module.noParse")]),this._v(" "),s("li",[this._v("加快模块寻找过程 resolve.modules / resolve.alias / resolve.extensions")]),this._v(" "),s("li",[this._v("HappyPack 多进程处理 loader，uglifyjs 启用 parallel 多进程处理")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("压缩js、css、html")]),this._v(" "),s("li",[this._v("tree shaking")]),this._v(" "),s("li",[this._v("code splitting")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("按需加载")]),this._v(" "),s("li",[this._v("合理缓存")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"从配置项来看-webpack-4-的不同之处"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从配置项来看-webpack-4-的不同之处","aria-hidden":"true"}},[this._v("#")]),this._v(" 从配置项来看 webpack 4 的不同之处")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"mode-做了什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mode-做了什么","aria-hidden":"true"}},[this._v("#")]),this._v(" mode 做了什么")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("// webpack.development.config.js")]),t._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'development'")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" devtool"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'eval'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("   "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NamedModulesPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 使用路径而不是数字作为 module 的索引 ")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("   "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NamedChunksPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("   "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"process.env.NODE_ENV"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("stringify")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"development"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// webpack.production.config.js")]),t._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("  mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'production'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("UglifyJsPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token comment"}},[t._v("/* ... */")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"process.env.NODE_ENV"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("stringify")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"production"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ModuleConcatenationPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("    "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NoEmitOnErrorsPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("// webpack.custom.config.js")]),t._v("\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v("  mode"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'none'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"optimization-可以做什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#optimization-可以做什么","aria-hidden":"true"}},[this._v("#")]),this._v(" optimization 可以做什么")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" UglifyJsPlugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v("'uglifyjs-webpack-plugin'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  optimization"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 压缩")]),t._v("\n    minimizer"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("UglifyJsPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("/* your config */")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 不生成，内嵌 | 对每个 entry 分别生成 | 对所有 entry 生成一个共用的运行时框架")]),t._v("\n    runtimeChunk"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'single'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// false | true or mutiple | single")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// 默认配置")]),t._v("\n    splitChunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// 对异步加载 | entry | 包括前面两种的 chunks 进行分割")]),t._v("\n      chunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'async'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// async | initial | all ")]),t._v("\n      minSize"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("30000")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      maxSize"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      minChunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("1")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      maxAsyncRequests"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("5")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      maxInitialRequests"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("3")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      automaticNameDelimiter"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'~'")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      cacheGroups"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token comment"}},[t._v("// 将符合条件的 chunks 合并到一个 group")]),t._v("\n        vendors"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/[\\\\/]node_modules[\\\\/]/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token comment"}},[t._v("// 分割第三方 module，可以设置 chunks: all 并指定 name 来合并全部 vendor")]),t._v("\n          priority"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("-")]),n("span",{attrs:{class:"token number"}},[t._v("10")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("default")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          minChunks"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("2")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          priority"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("-")]),n("span",{attrs:{class:"token number"}},[t._v("20")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          reuseExistingChunk"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"todo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#todo","aria-hidden":"true"}},[this._v("#")]),this._v(" TODO")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"dllplugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dllplugin","aria-hidden":"true"}},[this._v("#")]),this._v(" dllplugin")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"devtool-实测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#devtool-实测","aria-hidden":"true"}},[this._v("#")]),this._v(" devtool 实测")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"webpack-vs-rollup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-vs-rollup","aria-hidden":"true"}},[this._v("#")]),this._v(" webpack vs rollup")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])}],!1,null,null,null);e.options.__file="webpack.md";s.default=e.exports}}]);