<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack TL;DR | _.dawn</title>
    <meta name="description" content="新闻发布署">
    
    
    <link rel="preload" href="/notes/assets/css/0.styles.9c1a28d7.css" as="style"><link rel="preload" href="/notes/assets/js/app.7fb44869.js" as="script"><link rel="preload" href="/notes/assets/js/35.8e758eb9.js" as="script"><link rel="prefetch" href="/notes/assets/js/15.0c721535.js"><link rel="prefetch" href="/notes/assets/js/2.9a15e329.js"><link rel="prefetch" href="/notes/assets/js/3.4efdfa39.js"><link rel="prefetch" href="/notes/assets/js/4.675a765e.js"><link rel="prefetch" href="/notes/assets/js/5.db1e46a4.js"><link rel="prefetch" href="/notes/assets/js/6.04ddd226.js"><link rel="prefetch" href="/notes/assets/js/7.7ae72a82.js"><link rel="prefetch" href="/notes/assets/js/8.4cdc1d80.js"><link rel="prefetch" href="/notes/assets/js/9.95701596.js"><link rel="prefetch" href="/notes/assets/js/10.0a4a605e.js"><link rel="prefetch" href="/notes/assets/js/11.9b69c166.js"><link rel="prefetch" href="/notes/assets/js/12.5f93cb25.js"><link rel="prefetch" href="/notes/assets/js/13.6e1c22e7.js"><link rel="prefetch" href="/notes/assets/js/14.b76bb14a.js"><link rel="prefetch" href="/notes/assets/js/16.118cf163.js"><link rel="prefetch" href="/notes/assets/js/17.d79e9bae.js"><link rel="prefetch" href="/notes/assets/js/18.621aab7a.js"><link rel="prefetch" href="/notes/assets/js/19.1bf38dd6.js"><link rel="prefetch" href="/notes/assets/js/20.3cd2c8c9.js"><link rel="prefetch" href="/notes/assets/js/21.d3c4697f.js"><link rel="prefetch" href="/notes/assets/js/22.2af2c9f4.js"><link rel="prefetch" href="/notes/assets/js/23.49b1fcd8.js"><link rel="prefetch" href="/notes/assets/js/24.e86d0b15.js"><link rel="prefetch" href="/notes/assets/js/25.85627c9c.js"><link rel="prefetch" href="/notes/assets/js/26.fde3b38f.js"><link rel="prefetch" href="/notes/assets/js/27.fbf19f8c.js"><link rel="prefetch" href="/notes/assets/js/28.0a9b6c96.js"><link rel="prefetch" href="/notes/assets/js/29.6cc87f08.js"><link rel="prefetch" href="/notes/assets/js/30.7bfe4d10.js"><link rel="prefetch" href="/notes/assets/js/31.50c13991.js"><link rel="prefetch" href="/notes/assets/js/32.a11d06ec.js"><link rel="prefetch" href="/notes/assets/js/33.c59f1385.js"><link rel="prefetch" href="/notes/assets/js/34.a8759261.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.9c1a28d7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">_.dawn</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>webpack TL;DR</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/notes/category/webpack.html#原理" class="sidebar-link">原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#webpack-处理步骤" class="sidebar-link">webpack 处理步骤</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#loader-原理" class="sidebar-link">loader 原理</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#plugin-原理" class="sidebar-link">plugin 原理</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#输出文件分析" class="sidebar-link">输出文件分析</a></li></ul></li><li><a href="/notes/category/webpack.html#配置" class="sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#基本配置" class="sidebar-link">基本配置</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#高级配置" class="sidebar-link">高级配置</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#配置参数" class="sidebar-link">配置参数</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#优化总结" class="sidebar-link">优化总结</a></li></ul></li><li><a href="/notes/category/webpack.html#从配置项来看-webpack-4-的不同之处" class="sidebar-link">从配置项来看 webpack 4 的不同之处</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#mode-做了什么" class="sidebar-link">mode 做了什么</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#optimization-可以做什么" class="sidebar-link">optimization 可以做什么</a></li></ul></li><li><a href="/notes/category/webpack.html#todo" class="sidebar-link">TODO</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#dllplugin" class="sidebar-link">dllplugin</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#devtool-实测" class="sidebar-link">devtool 实测</a></li><li class="sidebar-sub-header"><a href="/notes/category/webpack.html#webpack-vs-rollup" class="sidebar-link">webpack vs rollup</a></li></ul></li><li><a href="/notes/category/webpack.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack-tl-dr"><a href="#webpack-tl-dr" aria-hidden="true" class="header-anchor">#</a> webpack TL;DR</h1> <blockquote><p>超长预警，不懂 webpack 时一点点扒文档并测试的总结</p></blockquote> <h2 id="原理"><a href="#原理" aria-hidden="true" class="header-anchor">#</a> 原理</h2> <h3 id="webpack-处理步骤"><a href="#webpack-处理步骤" aria-hidden="true" class="header-anchor">#</a> webpack 处理步骤</h3> <ol><li>初始化</li> <li>编译</li> <li>输出</li></ol> <h3 id="loader-原理"><a href="#loader-原理" aria-hidden="true" class="header-anchor">#</a> loader 原理</h3> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回单项结果</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
  <span class="token comment">// 返回多项结果</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token comment">// 使用 callback 时总是返回 undefined</span>
<span class="token punctuation">}</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
  err<span class="token punctuation">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
  sourceMap<span class="token operator">?</span><span class="token punctuation">:</span> SourceMap<span class="token punctuation">,</span>
  meta<span class="token operator">?</span><span class="token punctuation">:</span> any <span class="token comment">// meta 可以用来传递 AST，便于在 loaders 之间相互传递加速 build</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="plugin-原理"><a href="#plugin-原理" aria-hidden="true" class="header-anchor">#</a> plugin 原理</h3> <p>利用 webpack 编译过程中触发的各个事件(hook)，对 compiler 和 compilation 进行处理；也可以自定义事件</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 根据不同的 hook 类型，可能使用 tapAsync 或 tapPromise</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
<span class="token comment">// 如：compile 事件发生，执行函数</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compile<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> params <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Synchronously tapping the compile hook.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="输出文件分析"><a href="#输出文件分析" aria-hidden="true" class="header-anchor">#</a> 输出文件分析</h3> <p>得到 mode 为 none 下的输出文件，适当简化后如下</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token comment">/******/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span>  <span class="token comment">// 已缓存模块</span>
<span class="token comment">/******/</span>  <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>  <span class="token comment">// 加载模块的方法</span>
<span class="token comment">/******/</span>  <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>moduleId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>    <span class="token comment">// 判断模块是否在缓存中</span>
<span class="token comment">/******/</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span>      <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token comment">/******/</span>    <span class="token punctuation">}</span>
<span class="token comment">/******/</span>    <span class="token comment">// 创建新模块，并放入缓存</span>
<span class="token comment">/******/</span>    <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">/******/</span>      i<span class="token punctuation">:</span> moduleId<span class="token punctuation">,</span>
<span class="token comment">/******/</span>      l<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token comment">/******/</span>      exports<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">/******/</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>    <span class="token comment">// 执行新模块的方法</span>
<span class="token comment">/******/</span>    modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> module<span class="token punctuation">,</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>    <span class="token comment">// 将模块标记为已加载</span>
<span class="token comment">/******/</span>    module<span class="token punctuation">.</span>l <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>    <span class="token comment">// 返回模块输出</span>
<span class="token comment">/******/</span>    <span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token comment">/******/</span>  <span class="token punctuation">}</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>  <span class="token comment">// 在 __webpack_require__ 上定义了一堆变量和方法，用来引用模块、缓存、判断是否 esm 等</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>
<span class="token comment">/******/</span>  <span class="token comment">// 加载 entry 模块并返回结果</span>
<span class="token comment">/******/</span>  <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/******/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/************************************************************************/</span>
<span class="token comment">/******/</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
<span class="token comment">/* 0 */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token operator">...</span>code

devtool<span class="token punctuation">:</span> <span class="token string">'eval'</span> 时 <span class="token function">eval</span><span class="token punctuation">(</span><span class="token operator">...</span>code <span class="token comment">//# sourceURL=webpack:...)</span>

<span class="token comment">/***/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">/******/</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>即一个IIFE，其中定义了 <strong>webpack_require</strong> 对象，执行载入 entry 模块，参数为所有 modules 的数组</p> <p>当使用 NamedModulesPlugin 或 HashedModuleIdsPlugin 时，参数是一个 modules 对象，键值为模块的 path 或 hash 值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>modules<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">[</span>modules<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="配置"><a href="#配置" aria-hidden="true" class="header-anchor">#</a> 配置</h2> <h3 id="基本配置"><a href="#基本配置" aria-hidden="true" class="header-anchor">#</a> 基本配置</h3> <ol><li>提取 css 文件
<ul><li>webpack4: mini-css-extract-plugin, 目前有个 <code>bug</code>，options 中设置的 publickPath 无效，见<a href="https://github.com/webpack-contrib/mini-css-extract-plugin/issues/222" target="_blank" rel="noopener noreferrer">issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>webpack3: extract-text-webpack-plugin</li></ul></li> <li>压缩 css
<ul><li>webpack4:  css-loader 不再支持 cssnano，可以使用 optimize-css-assets-webpack-plugin , 或在 postcss 中加入 cssnano 的 plugin</li> <li>webpack3: cssnano 是 css-loader 内置的，开启 minimize 选项即可</li></ul></li> <li>css 自动加前缀: postcss-loader autoprefixer plugin
<ul><li>postcss 配置文件：postcss.config.js / .postcssrc.json</li> <li>配置文件位置：css所在目录 到 根目录之间的路径 / package.json 中加个 postcss 项</li></ul></li> <li>压缩 JS
<ul><li>uglifyjs-webpacl-plugin 建议开启 parallel 选项，多进程并行 build</li> <li>mode: production 时自动启用 uglifyjs</li></ul></li> <li>es6 转码: babel-loader 做两件事
<ul><li>处理语法 如 class: babel-loader 依赖 babel-core 需配套使用，用来处理语法</li> <li>处理 api 如 fetch: babel-plugin-transform-run-time 依赖 babel-rumtime 需配套使用，helper 函数不重复注入，通过 require 引用，减少代码冗余。详见 <a href="/notes/category/babel.html">babel</a></li></ul></li> <li>tree shaking
<ul><li>使用 es6 的 import / export 语法，因为模块的依赖关系与运行时无关，因此可以静态分析出 dead code</li> <li>package.json 中设置 sideEffects</li> <li>开启 production mode（ModuleConcatenationPlugin 和 UglifyJsPlugin 起作用）</li></ul></li> <li>提取公共代码 Code Splitting
<ul><li>webpack4: SplitChunksPlugin</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>webpack3: CommonsChunkPlugin</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'base'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> Number <span class="token comment">// 被提取文件出现的最少次数</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li> <li>其他
<ul><li>html-webpack-plugin 生成 html，inject files</li> <li>clean-webpack-plugin build 前清空指定目录</li></ul></li></ol> <h3 id="高级配置"><a href="#高级配置" aria-hidden="true" class="header-anchor">#</a> 高级配置</h3> <ol><li>coding splitting 的几种方式
<ul><li>默认：动态载入的 chunk import(/* webpackChunkName: &quot;lodash&quot; */ 'lodash').then; 支持 prefetch 和 preload，import(/* webpackPrefetch: true */ 'LoginModal');</li> <li>默认：动态载入的 chunk 中引入的<code>新的</code>共用 chunk 或<code>新的</code>第三方 modules (node_modules 中)，要求大于 30kb，符合并行请求数量</li> <li>自定义：按需对 splitchunks 进行配置，一般可以考虑将 all chunks 中的第三方模块合并为一个 vendor，长期缓存</li></ul></li> <li>缓存策略
<ul><li>不缓存 html</li> <li>缓存 基础库js、分割的公共js、业务代码js、静态文件</li> <li>利用文件名中的 hash 值来控制缓存命中，使用 contenthash、 NamedModulesPlugin（development 下适用，运行慢）或 HashedModuleIdsPlugin（production 适用）生成文件名，确保业务代码不影响基础库的 hash 值</li> <li>分别配置 js、css、css 中导入资源的 publicPath，以免单个域名下请求阻塞<code>[incomplete]</code></li></ul></li> <li>tree shaking: ModuleConcatenationPlugin 中的 scope hoisting, 将所有模块放到同一个闭包中执行 <code>[incomplete]</code></li></ol> <h3 id="配置参数"><a href="#配置参数" aria-hidden="true" class="header-anchor">#</a> 配置参数</h3> <p>一些概念</p> <ol><li>chunk: 从 entry 出发找到全部依赖 module 的代码块</li> <li>entry 的类型
<ol><li>string  生成一个 chunk: main</li> <li>array（只导出最后一个）生成一个 chunk: main</li> <li>object 生成多个 chunk: 键名</li> <li>以上三种组合</li> <li>function 动态 entry</li></ol></li> <li>module.exports 是数组时，每份配置都会执行一次 [看到有文章提过，文档中没有找到，还没有测过]</li> <li>命令行参数优先级高于配置文件</li> <li>HMR 原理：子模块发生更新，事件向上传递，直到某一层接收，否则刷新网页，依赖于每个 chunk 中包含的代理客户端代码</li></ol> <p><a href="https://webpack.js.org/configuration/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/configuration/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>webpack.config.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// &quot;production&quot; | &quot;development&quot; | &quot;none&quot;</span>
  entry<span class="token punctuation">:</span> <span class="token string">&quot;./app/entry&quot;</span><span class="token punctuation">,</span> <span class="token comment">// string | object | array  // defaults to ./src</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// string, absolute path</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// string    // entry 中 chunks 的文件名样板</span>
    chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span> <span class="token comment">// 非 entry 中 chunks 的文件名样板</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">&quot;/assets/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// string    // the url to the output directory resolved relative to the HTML page</span>
    library<span class="token punctuation">:</span> <span class="token string">&quot;MyLibrary&quot;</span><span class="token punctuation">,</span> <span class="token comment">// string, 导出库名称</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 导出库类型 amd | umd | umd2 | commonjs | commonjs2 | window | global | var...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span> <span class="token comment">// 匹配文件名</span>
        include<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 匹配路径</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app/demo-files&quot;</span><span class="token punctuation">)</span> <span class="token comment">// exclude 优先级最高，</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// exclude / include 使用绝对路径的数组，尽量使用 include 而非 exclude 匹配</span>

        enforce<span class="token punctuation">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span> <span class="token comment">// pre | inline | normal | post 处理顺序</span>
        loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 多个 loader</span>
          <span class="token string">&quot;htmllint-loader&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">&quot;html-loader&quot;</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token comment">/* ... */</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    noParse<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token operator">/</span>special<span class="token operator">-</span>library\<span class="token punctuation">.</span>js$<span class="token operator">/</span> <span class="token comment">// 不对未使用模块化的文件进行递归解析处理，如 jquery</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 模块化语法解析规则，就是优先从哪儿开始找模块</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 文件路径</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.jsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.css&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 文件后缀</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 起个别名</span>
      <span class="token string">&quot;module&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;new-module&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 例如 &quot;module&quot; -&gt; &quot;new-module&quot;, &quot;module/path/file&quot; -&gt; &quot;new-module/path/file&quot;</span>
      <span class="token string">&quot;only-module$&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;new-module&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 使用 $ 只命中关键字结尾的导入语句</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    mainFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'browser'</span><span class="token punctuation">,</span> <span class="token string">'module'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span> <span class="token comment">// 根据 package.json 中的配置类型读取模块，默认配置</span>
    enforceExtension<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 要求 import 语句必须带后缀</span>
    enforceModuleExtension<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// 兼容第三方模块</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hints<span class="token punctuation">:</span> <span class="token string">&quot;warning&quot;</span><span class="token punctuation">,</span> <span class="token comment">// enum    maxAssetSize: 200000, // int (in bytes),</span>
    maxEntrypointSize<span class="token punctuation">:</span> <span class="token number">400000</span><span class="token punctuation">,</span> <span class="token comment">// int (in bytes)</span>
    assetFilter<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>assetFilename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Function predicate that provides asset filenames</span>
      <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.css'</span><span class="token punctuation">)</span> <span class="token operator">||</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devtool<span class="token punctuation">:</span> <span class="token string">&quot;source-map&quot;</span><span class="token punctuation">,</span> <span class="token comment">// enum  // enhance debugging by adding meta info for the browser devtools</span>
  <span class="token comment">// source-map most detailed at the expense of build speed.</span>
  context<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span> <span class="token comment">// string 绝对路径，配置项目根目录，即寻找 entry 与 module.rules.loader 中相对路径的基准</span>
  target<span class="token punctuation">:</span> <span class="token string">&quot;web&quot;</span><span class="token punctuation">,</span> <span class="token comment">// enum  // 运行环境</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token regex">/^@angular\//</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 使用运行环境提供的全局变量，不需要打包</span>
  serve<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">//object</span>
    port<span class="token punctuation">:</span> <span class="token number">1337</span><span class="token punctuation">,</span>
    content<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// lets you provide options for webpack-serve</span>
  stats<span class="token punctuation">:</span> <span class="token string">&quot;errors-only&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// lets you precisely control what bundle information gets displayed</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 通过 DevServer 启动时有效</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// proxy URLs to backend development server</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// boolean | string | array, static file location</span>
    compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// enable gzip compression</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// true for index.html upon 404, object for multiple paths</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 开启 HMR</span>
    https<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// true for self-signed, object for cert authority</span>
    noInfo<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// only errors &amp; warns on hot reload</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean 启用监听</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    aggregateTimeout<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 毫秒，监听到变化后延迟指定时间再 rebuild</span>
    poll<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    poll<span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// 毫秒，每隔多久查询一次</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="优化总结"><a href="#优化总结" aria-hidden="true" class="header-anchor">#</a> 优化总结</h3> <p>提高构建速度</p> <ol><li>减少文件处理 include / exclude / module.noParse</li> <li>加快模块寻找过程 resolve.modules / resolve.alias / resolve.extensions</li> <li>HappyPack 多进程处理 loader，uglifyjs 启用 parallel 多进程处理</li></ol> <p>减小输出文件</p> <ol><li>压缩js、css、html</li> <li>tree shaking</li> <li>code splitting</li></ol> <p>首屏优化</p> <ol><li>按需加载</li> <li>合理缓存</li></ol> <h2 id="从配置项来看-webpack-4-的不同之处"><a href="#从配置项来看-webpack-4-的不同之处" aria-hidden="true" class="header-anchor">#</a> 从配置项来看 webpack 4 的不同之处</h2> <h3 id="mode-做了什么"><a href="#mode-做了什么" aria-hidden="true" class="header-anchor">#</a> mode 做了什么</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.development.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token operator">+</span> mode<span class="token punctuation">:</span> <span class="token string">'development'</span>
<span class="token operator">-</span> devtool<span class="token punctuation">:</span> <span class="token string">'eval'</span><span class="token punctuation">,</span>
<span class="token operator">-</span> plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
<span class="token operator">-</span>   <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 使用路径而不是数字作为 module 的索引 </span>
<span class="token operator">-</span>   <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NamedChunksPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">-</span>   <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;process.env.NODE_ENV&quot;</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&quot;development&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">-</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// webpack.production.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token operator">-</span>  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
<span class="token operator">-</span>    <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">-</span>    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;process.env.NODE_ENV&quot;</span><span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">-</span>    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>ModuleConcatenationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">-</span>    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NoEmitOnErrorsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span>  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token comment">// webpack.custom.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token operator">+</span>  mode<span class="token punctuation">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
<span class="token operator">-</span>  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
<span class="token operator">-</span>  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>补充：production 应该还启用了 FlagDependencyUsagePlugin, FlagIncludedChunksPlugin, OccurrenceOrderPlugin 和 SideEffectsFlagPlugin，见 <a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js" target="_blank" rel="noopener noreferrer">github.com/webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="optimization-可以做什么"><a href="#optimization-可以做什么" aria-hidden="true" class="header-anchor">#</a> optimization 可以做什么</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 压缩</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* your config */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 不生成，内嵌 | 对每个 entry 分别生成 | 对所有 entry 生成一个共用的运行时框架</span>
    runtimeChunk<span class="token punctuation">:</span> <span class="token string">'single'</span><span class="token punctuation">,</span> <span class="token comment">// false | true or mutiple | single</span>
    <span class="token comment">// 默认配置</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 对异步加载 | entry | 包括前面两种的 chunks 进行分割</span>
      chunks<span class="token punctuation">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span> <span class="token comment">// async | initial | all </span>
      minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      maxSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      minChunks<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      maxAsyncRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      maxInitialRequests<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将符合条件的 chunks 合并到一个 group</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span> <span class="token comment">// 分割第三方 module，可以设置 chunks: all 并指定 name 来合并全部 vendor</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="todo"><a href="#todo" aria-hidden="true" class="header-anchor">#</a> TODO</h2> <h3 id="dllplugin"><a href="#dllplugin" aria-hidden="true" class="header-anchor">#</a> dllplugin</h3> <h3 id="devtool-实测"><a href="#devtool-实测" aria-hidden="true" class="header-anchor">#</a> devtool 实测</h3> <p><a href="https://webpack.js.org/configuration/devtool/" target="_blank" rel="noopener noreferrer">https://webpack.js.org/configuration/devtool/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
速度和输出文件的区别</p> <h3 id="webpack-vs-rollup"><a href="#webpack-vs-rollup" aria-hidden="true" class="header-anchor">#</a> webpack vs rollup</h3> <p>如果作为工具库，需要提供 esm 版本的代码，依然需要 rollup 的，并且二者的 tree shaking 分析存在差异。</p> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://webpack.js.org/guides/" target="_blank" rel="noopener noreferrer">Webpack guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://webpack.wuhaolin.cn/" target="_blank" rel="noopener noreferrer">深入浅出 Webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://zhuanlan.zhihu.com/p/38456425" target="_blank" rel="noopener noreferrer">Webpack 4 配置最佳实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/notes/assets/js/35.8e758eb9.js" defer></script><script src="/notes/assets/js/app.7fb44869.js" defer></script>
  </body>
</html>
